
<div>
  <%= simple_form_for(@search) do |f| %>
    <div class="index-filterbar">
      <div class="search-content" id="search-address">
        <div class="search-content-title">
          <span>Parking</span>
        </div>
        <div class="search-content-input">
          <%= f.text_field :address, id:'parking_address', placeholder: "Where do you want to park?" %>
        </div>
      </div>
      <div class="search-content search-date">
        <div class="search-content-title">
          <span>Arriving</span>
        </div>
        <div class="search-content-input">
          <%= f.input :starting, as: :string, required: false, input_html: { class: "datepicker", placeholder: "Select day and time", value:"#{@dates.first}", label: false }, label_html: { style: 'display: none' }, wrapper_html: { style: 'margin-bottom: 0;' } %>
          <i class="fas fa-chevron-down primary-color"></i>
        </div>
      </div>
      <div class="search-content search-date">
        <div class="search-content-title">
          <span>Leaving</span>
        </div>
        <div class="search-content-input">
          <%= f.input :ending, as: :string, required: false, input_html: { class: "datepicker", placeholder: "Select day and time", value:"#{@dates.last}" }, label_html: { style: 'display: none' }, wrapper_html: { style: 'margin-bottom: 0;' } %>
        <i class="fas fa-chevron-down primary-color"></i>
        </div>
      </div>
      <div class="search-content search-content-outer" id="search-address">
        <i class="fas fa-filter"></i>
        <div class="search-content-inner">
          <div class="search-content-title">
            <span>Filters</span>
          </div>
          <div class="search-content-input">
            <div class="search-content-input">
          <%= f.text_field :address, placeholder: "Apply special filters!", id:'features_filter' %>
        </div>
          </div>
        </div>
      </div>
      <div class="search-submit">
        <%= f.submit %>
      </div>
    </div>
  <% end %>
</div>
<div id="parking-holder">
  <div id="parkings-options">
    <div class="card-wrapper">
    <% @parkings.each do |parking| %>
    <%= render "shared/card", parking: parking, features: @features, lat_long: @lat_long %>
    <%= render "shared/popup", parking: parking, lat_long: @lat_long %>
    <% end %>
    </div>
  </div>
  <div id="parkings-map">
    <div
    id="map"
    style="width: 100%; height: 100%;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  </div>
</div>

<%= render "shared/footer" %>


<form class="simple_form new_search" id="new_search" novalidate="novalidate" action="/searches" accept-charset="UTF-8" method="post">
  <input name="utf8" type="hidden" value="âœ“">
  <%= hidden_field_tag :authenticity_token, form_authenticity_token -%>
  <div class="index-filterbar">
    <div class="search-content" id="search-address">
      <div class="search-content-title">
        <span>Parking</span>
      </div>
      <div class="search-content-input">
        <input id="parking_address" placeholder="Where do you want to park?" type="search" name="search[address]"/>
      </div>
    </div>
    <div class="search-content search-date">
      <div class="search-content-title">
        <span>Arriving</span>
      </div>
      <div class="search-content-input">
        <div style="margin-bottom: 0;" class="form-group string optional search_starting">
          <label class="form-control-label string optional" style="display: none" for="search_starting">Starting</label>
          <input class="form-control string optional datepicker flatpickr-input" placeholder="Select day and time" value="Mar-03 14:28" label="false" type="text" name="search[starting]" id="search_starting" readonly="readonly">
        </div>
        <i class="fas fa-chevron-down primary-color"></i>
      </div>
    </div>
    <div class="search-content search-date">
      <div class="search-content-title">
        <span>Leaving</span>
      </div>
      <div class="search-content-input">
        <div style="margin-bottom: 0;" class="form-group string optional search_ending">
          <label class="form-control-label string optional" style="display: none" for="search_ending">Ending
          </label>
          <input class="form-control string optional datepicker flatpickr-input" placeholder="Select day and time" value="Mar-03 16:28" type="text" name="search[ending]" id="search_ending" readonly="readonly">
        </div>
        <i class="fas fa-chevron-down primary-color"></i>
      </div>
    </div>
    <div class="search-content search-content-outer" id="search-address">
      <i class="fas fa-filter"></i>
      <div class="search-content-inner">
        <div class="search-content-title">
          <span>Filters</span>
        </div>
        <div class="search-content-input">
          <div class="search-content-input">
            <input placeholder="Apply special filters!" type="text" name="search[address]" id="search_address">
          </div>
        </div>
      </div>
    </div>
    <div class="search-submit">
      <input type="submit" name="commit" value="Create Search" data-disable-with="Create Search">
    </div>
  </div>
</form>

<%= render "parkings/featuresfilter", features: @features %>
